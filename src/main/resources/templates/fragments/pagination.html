<!-- 수정: src/main/resources/templates/fragments/pagination.html (Fragment 추가) -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- 기본 페이징 (검색어 없음) -->
<nav th:fragment="pagination(page, baseUrl)" aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        <!-- 이전 버튼 -->
        <li class="page-item" th:classappend="${page.first} ? 'disabled'">
            <a class="page-link" th:href="|${baseUrl}?page=${page.number - 1}|">
                이전
            </a>
        </li>

        <!-- 페이지 번호 (현재 페이지 기준 앞뒤 2개씩) -->
        <th:block th:with="start=${T(Math).max(0, page.number - 2)},
                          end=${T(Math).min(page.totalPages - 1, page.number + 2)}">
            <li class="page-item"
                th:each="i : ${#numbers.sequence(start, end)}"
                th:classappend="${i == page.number} ? 'active'">
                <a class="page-link"
                   th:href="|${baseUrl}?page=${i}|"
                   th:text="${i + 1}">1</a>
            </li>
        </th:block>

        <!-- 다음 버튼 -->
        <li class="page-item" th:classappend="${page.last} ? 'disabled'">
            <a class="page-link" th:href="|${baseUrl}?page=${page.number + 1}|">
                다음
            </a>
        </li>
    </ul>
</nav>

<!-- 키워드 포함 페이징 (검색어 유지) - 추가 -->
<nav th:fragment="paginationWithKeyword(page, baseUrl, keyword)" aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        <!-- 이전 버튼 -->
        <li class="page-item" th:classappend="${page.first} ? 'disabled'">
            <a class="page-link"
               th:href="|${baseUrl}?page=${page.number - 1}${keyword != null and keyword != '' ? '&keyword=' + keyword : ''}|">
                이전
            </a>
        </li>

        <!-- 페이지 번호 (현재 페이지 기준 앞뒤 2개씩) -->
        <th:block th:with="start=${T(Math).max(0, page.number - 2)},
                          end=${T(Math).min(page.totalPages - 1, page.number + 2)}">
            <li class="page-item"
                th:each="i : ${#numbers.sequence(start, end)}"
                th:classappend="${i == page.number} ? 'active'">
                <a class="page-link"
                   th:href="|${baseUrl}?page=${i}${keyword != null and keyword != '' ? '&keyword=' + keyword : ''}|"
                   th:text="${i + 1}">1</a>
            </li>
        </th:block>

        <!-- 다음 버튼 -->
        <li class="page-item" th:classappend="${page.last} ? 'disabled'">
            <a class="page-link"
               th:href="|${baseUrl}?page=${page.number + 1}${keyword != null and keyword != '' ? '&keyword=' + keyword : ''}|">
                다음
            </a>
        </li>
    </ul>
</nav>

</html>
